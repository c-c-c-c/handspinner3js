{"version":3,"sources":["../../src/script/script.js"],"names":["vm","Vue","el","data","count","methods","countUp","changeRotateSpeed","vm_stop","hsStop","Speed_0","howManySpinners","scene","THREE","Scene","box","controls","renderer","camera","model","model2","model3","rotate_speed","r_radian","c_radian","geometry","material","scroll_px","delta_scroll_px","sum_delta_scroll_px","$window","$","window","renderHandSpinner","light","ambient","gridHelper","axisHelper","lightHelp","width","height","modelPath","DirectionalLight","position","set","add","AmbientLight","PerspectiveCamera","lookAt","i","WebGLRenderer","antialias","setSize","setClearColor","setPixelRatio","devicePixelRatio","document","getElementsByClassName","appendChild","domElement","loader","JSONLoader","load","geo","mat","phongMat","MeshPhongMaterial","Mesh","randX","Math","random","randY","randZ","scale","randColor","color","Color","opacity","transparent","render","addSpinner","size","requestAnimationFrame","rotation","y","sin","cameraZ","countScroll","scroll","before_scroll_px","console","log","scrollTop","text","ready"],"mappings":"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","file":"script.js","sourcesContent":["var vm = new Vue({\n  el: '#mycounter',\n  data: {\n    count: 0\n  },\n  methods: {\n    countUp: function() {\n            this.count++;\n            changeRotateSpeed ();\n      }\n  }\n});\n\nvar vm_stop = new Vue({\n  el: '#mystop',\n  methods: {\n    hsStop: function() {\n            Speed_0();\n    }\n  }\n});\n\nlet howManySpinners = 200;\nlet scene = new THREE.Scene();\nlet box;\nlet controls;\nlet renderer = [];\nlet camera;\nlet model = [];\n//let model = {};\nlet model2 = {};\nlet model3 = {};\nlet rotate_speed = 0.05;\nlet r_radian = 0;\nlet c_radian = 0;\nlet geometry;\nlet material;\nlet scroll_px = 0;\nlet delta_scroll_px = 0;\nlet sum_delta_scroll_px = 0.05;\nconst $window = $(window);\n\nfunction renderHandSpinner () {\n  'use strict';\n  let light;\n  let ambient;\n  let gridHelper;\n\tlet axisHelper;\n  let lightHelp;\n  let width = 960;\n  let height = 160;\n\tlet modelPath ;\n\n   //light\n  light = new THREE.DirectionalLight(0xffffff, 1);\n  light.position.set(0, 200, 80);\n  scene.add(light);\n  ambient = new THREE.AmbientLight(0x404040);\n  scene.add(ambient);\n\n\t//camera\n  camera = new THREE.PerspectiveCamera(45, 4, 1, 1000);\n  camera.position.set(0, 400, 300);\n  camera.lookAt(scene.position);\n\n  // helper 現在は非表示\n  //gridHelper = new THREE.GridHelper(200, 50);\n  //scene.add(gridHelper);\n  //axisHelper = new THREE.AxisHelper(1000);\n  //scene.add(axisHelper);\n  //lightHelper = new THREE.DirectionalLightHelper(light , 20)\n  //scene.add(lightHelper);\n\n  //controls\n\t//controls = new THREE.OrbitControls(camera);\n  //cameraの自動回転\n  //controls.autoRotate = true;\n // controls.autoRotateSpeed = 1.5;\n\n  // renderer\n  for (let i= 0 ; i < 4; i++ ) {\n  \trenderer[i] = new THREE.WebGLRenderer({ antialias: true });\n  \trenderer[i].setSize(width, height);\n  \trenderer[i].setClearColor(0xffffff);\n  \trenderer[i].setPixelRatio(window.devicePixelRatio);\n\n\t\tdocument.getElementsByClassName('stage')[i].appendChild(renderer[i].domElement);\n\t}\n\t//modelPath = 'src/bear.json';\n\t//modelPath = 'src/handspiner_3d.json';\n  //modelPath = '../src/data/handspiner_3d_geo.json';\n  modelPath = './src/data/handspiner_3d_geo.json';\n\t//modelPath = '/Users/yoshimurahiroyuki/workspace/threejs/src/handspiner.json';\n\n  let loader = new THREE.JSONLoader();　　\n  loader.load(modelPath, function(geo, mat) {　　　\n    //let phongMat = new THREE.MeshPhongMaterial(mat);\n    //let phongMat2 = new THREE.MeshPhongMaterial(mat);\n    //let phongMat3 = new canvasE.MeshPhongMaterial(mat);\n    //for (let mt of faceMat.materials) {\n    //  mt.color = new THREE.Color(0xffcc88);\n  \t//}\n    geometry = geo;\n    material = mat;\n\n\t\tfor (let i=0; i < howManySpinners; i++ ) {\n      let phongMat = new THREE.MeshPhongMaterial(mat);\n      model[i] = new THREE.Mesh(geo, phongMat);\n\n\t\t\tlet randX = 1800 * Math.random()-900;\n\t\t\tlet randY = 700 * Math.random()-150;\n\t\t\tlet randZ = 400 * Math.random()-200;\n\n      if (i==0) {\n\t\t\t\tmodel[i].position.set(0, 20, 0);\n\t\t\t} else {\n\t\t\t\tmodel[i].position.set(randX, randY, randZ);\n\t\t\t}　　\n\n    \tmodel[i].scale.set(0.5, 0.5, 0.5);　\n    \tlet randColor = Math.random() * 0xffffff ;　　　\n    \tmodel[i].material.color = new THREE.Color(randColor);\n    \tmodel[i].material.opacity = 0.3;\n\t\t\tmodel[i].material.transparent = true;\n\t\t\tscene.add(model[i]);　　　\n\t\t}\n    render();\n  });　\n}\n\nfunction addSpinner () {\n  let phongMat = new THREE.MeshPhongMaterial(material);\n  model = new THREE.Mesh(geometry, phongMat);\n\tlet randX = 800 * Math.random();\n\tlet randY = 800 * Math.random();\n\tlet randZ = 800 * Math.random();\n\n  let size = Math.random();\n\tmodel.scale.set(size, size, size);　　　\n  model.position.set(randX, randY, randZ);\n\tlet randColor = Math.random() * 0xffffff;　　　\n\tmodel.material.color = new THREE.Color(randColor);\n\tscene.add(model);　\n}\n\nfunction render () {\n\n  requestAnimationFrame(render);\n  r_radian += 0.01;\n\n\tfor (let i=0; i < howManySpinners; i++ ) {\n  \tif( delta_scroll_px < 0 )  {\n\t\t\trotate_speed = 0;\n\t\t\tsum_delta_scroll_px = 0;\n\t\t} else {\n\t\t\trotate_speed =  sum_delta_scroll_px/6000 + 0.05;\n\t\t}\n\n\t\tmodel[i].rotation.y += rotate_speed;\n    model[i].position.y += (Math.sin(r_radian) - Math.sin(r_radian-0.01))*150 ;\n\t}\n\n\tc_radian += 0.007;\n  let cameraZ = 150 * (Math.sin(c_radian)) +150;\n // let cameraZ = 0;\n\tcamera.position.set(0, 600, cameraZ);\n\n  //controls.update();\n\tfor (let i=0; i<4; i++) {\n  \trenderer[i].render(scene, camera);\n\t}\n}\n\nfunction changeRotateSpeed () {\n  //controls.autoRotateSpeed = vm.count*10;\n \trotate_speed += vm.count*0.01;\n  for (let i=0 ; i < howManySpinners; i++) {\n\n\t\tmodel[i].rotation.y = 1.8*vm.count;\n  }\n}\n\nfunction Speed_0 () {\n  vm.count = 0;\n  rotate_speed = 0;\n \t//addSpinner();\n}\n\n\nfunction countScroll () {\n\t// スクロールしたら発動\n\t$window.scroll(function() {\n\t\tlet before_scroll_px = scroll_px;\n\t\tconsole.log(sum_delta_scroll_px);\n\t\t// スクロール量を変数に格納\n\t\tscroll_px = $(this).scrollTop();\n\t\tdelta_scroll_px = (scroll_px) - (before_scroll_px);\n\t\tsum_delta_scroll_px +=delta_scroll_px;\n//\t\tconsole.log(\"scroll:\"+scroll_px);\n//\t\tconsole.log(\"before\" + before_scroll_px);\n//\t\tconsole.log(\"delta\" + delta_scroll_px);\n\t\t// HTMLにスクロール量を表示\n\t\t$('#sc').text(sum_delta_scroll_px);\n\t\t$('#dsc').text(delta_scroll_px);\n\n\n\t});\n}\n\n\n$(document).ready(function() {\n\t$(countScroll());\n\trenderHandSpinner();\n});\n"]}